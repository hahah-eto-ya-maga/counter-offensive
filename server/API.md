# Документ с методами API

## Оглавление
## Адрес домена
    http://localhost/api/?(ключи и значения)
---  

## Структуры данных
**Успешный ответ**
```
Correct = {
    result:'ok',
    data: Data
}
```

**Ошибочный ответ**
```
Error = {
    result:'error',
    error: {
        code: number, 
        text: text
    }
}
```

**Пользователь**
```
User = {
    login:string, 
    nickname:string
    token:string
}
```

## Значение ошибок по их коду
400:**Bad Request** - Указаны не все параметры

*401*:**Unauthorized** - Неавторизованный запрос(неверный токен)

*403*:**Forbidden** - Неверный логин и пароль

*405*:**Method Not Allowed** - Метод не указан

*413*:**Invalid login(nickname)** - Неверный формат логина

*501*:**Not Implemented** - Метод не реализован на сервере
        
*503*:**DB Unavailable** - Не удалось подключиться к базе данных

*460*:**Login Occupied** - Логин занят

*461*:**User not Exist** - Пользователь не существует

*9000*:**Unknown Error** - Неизвестная ошибка


---
## Метод регистрации
### Адрес
```method=registration```
### Параметры
|Параметр|Тип|Комментарий|
|-|-|-|
|login|string|длина от **6** до **15** символов, латиницы и кириллицы и спецсимволов "_-"|
|nickname|string|длина от **6** до **15** символов, латиницы и кириллицы и спецсимволов "_-"|
|hash|string|```sha256(login+password)```|

### Значение если успех
```
Correct=>User
```

### Значение если ошибка
```
Error(400) - Указаны не все обязательные параметры
Error(413) - Не удовлетворяет формату логина
Error(460) - Логин уже занят
```

---
## Метод логина
### Адрес
```method=login```
### Параметры
|Параметр|Тип|Комментарий|
|-|-|-|
|login|string| |
|hash|string|```sha256(sha256(login+password)+rnd)```|
|rnd|number|рандомное число|
### Значение если успех
```
Correct=>User
```
### Значение если ошибка
```
Error(400) - Указаны не все обязательные параметры
Error(403) - Неверный логин или пароль
Error(461) - Пользователя не существует
```
---
## Метод выхода
### Адрес
```method=logout```
### Параметры
|Параметр|Тип|Комментарий|
|-|-|-|
|login|string| |
|token|string|```sha256(uuid4)```|
### Значение если успех
```
Correct=>true
```
### Значение если ошибка
```
Error(400) - Указаны не все обязательные параметры
Error(461) - Пользователя не существует
Error(401) - Неавторизованный запрос
```

---
## Метод подтверждения токена
### Адрес
```method=tokenVerification```
### Параметры
|Параметр|Тип|Комментарий|
|-|-|-|
|login|string| |
|token|string|```sha256(uuid4)```|
### Значение если успех
```
Correct=>true
```
### Значение если ошибка
```
Error(400) - Указаны не все обязательные параметры
Error(461) - Пользователя не существует
Error(401) - Неавторизованный запрос
```

---

## Метод обновления пароля
### Адрес
```method=updatePassword```
### Параметры
|Параметр|Тип|Комментарий|
|-|-|-|
|login|string| |
|token|string|```sha256(uuid4)```|
|hash|string|```sha256(login+password)```|

### Значение если успех
```
Correct=>true
```
### Значение если ошибка
```
Error(400) - Указаны не все обязательные параметры
Error(461) - Пользователя не существует
Error(401) - Неавторизованный запрос
```
